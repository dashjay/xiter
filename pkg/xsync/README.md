<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# xsync

```go
import "github.com/dashjay/xiter/pkg/xsync"
```

package xsync provides some generics wrappers for some standard libraries like sync.Map, sync.Pool, sync.Mutext etc.

## Index

- [type LockedValue](<#LockedValue>)
  - [func NewLockedValue\[T any\]\(value T\) \*LockedValue\[T\]](<#NewLockedValue>)
  - [func \(l \*LockedValue\[T\]\) Lock\(\) T](<#LockedValue[T].Lock>)
  - [func \(l \*LockedValue\[T\]\) LockCB\(cb func\(T\)\)](<#LockedValue[T].LockCB>)
  - [func \(l \*LockedValue\[T\]\) SetValue\(value T\)](<#LockedValue[T].SetValue>)
  - [func \(l \*LockedValue\[T\]\) TryLock\(\) \(val T, locked bool\)](<#LockedValue[T].TryLock>)
  - [func \(l \*LockedValue\[T\]\) Unlock\(\)](<#LockedValue[T].Unlock>)
- [type RWLockedValue](<#RWLockedValue>)
  - [func NewRWLockedValue\[T any\]\(value T\) \*RWLockedValue\[T\]](<#NewRWLockedValue>)
  - [func \(l \*RWLockedValue\[T\]\) Lock\(\) T](<#RWLockedValue[T].Lock>)
  - [func \(l \*RWLockedValue\[T\]\) LockCB\(cb func\(T\)\)](<#RWLockedValue[T].LockCB>)
  - [func \(l \*RWLockedValue\[T\]\) RLock\(\) T](<#RWLockedValue[T].RLock>)
  - [func \(l \*RWLockedValue\[T\]\) RLockCB\(cb func\(T\)\)](<#RWLockedValue[T].RLockCB>)
  - [func \(l \*RWLockedValue\[T\]\) RUnlock\(\)](<#RWLockedValue[T].RUnlock>)
  - [func \(l \*RWLockedValue\[T\]\) SetValue\(value T\)](<#RWLockedValue[T].SetValue>)
  - [func \(l \*RWLockedValue\[T\]\) TryLock\(\) \(val T, locked bool\)](<#RWLockedValue[T].TryLock>)
  - [func \(l \*RWLockedValue\[T\]\) TryRLock\(\) \(val T, locked bool\)](<#RWLockedValue[T].TryRLock>)
  - [func \(l \*RWLockedValue\[T\]\) Unlock\(\)](<#RWLockedValue[T].Unlock>)
- [type SyncMap](<#SyncMap>)
  - [func NewSyncMap\[K comparable, V any\]\(\) \*SyncMap\[K, V\]](<#NewSyncMap>)
  - [func \(s \*SyncMap\[K, V\]\) Clear\(\)](<#SyncMap[K, V].Clear>)
  - [func \(s \*SyncMap\[K, V\]\) CompareAndDelete\(key K, old V\) bool](<#SyncMap[K, V].CompareAndDelete>)
  - [func \(s \*SyncMap\[K, V\]\) CompareAndSwap\(key K, old, new V\) bool](<#SyncMap[K, V].CompareAndSwap>)
  - [func \(s \*SyncMap\[K, V\]\) Delete\(key K\)](<#SyncMap[K, V].Delete>)
  - [func \(s \*SyncMap\[K, V\]\) Len\(\) int](<#SyncMap[K, V].Len>)
  - [func \(s \*SyncMap\[K, V\]\) Load\(key K\) \(value V, ok bool\)](<#SyncMap[K, V].Load>)
  - [func \(s \*SyncMap\[K, V\]\) LoadAndDelete\(key K\) \(value V, loaded bool\)](<#SyncMap[K, V].LoadAndDelete>)
  - [func \(s \*SyncMap\[K, V\]\) LoadOrStore\(key K, value V\) \(actual V, loaded bool\)](<#SyncMap[K, V].LoadOrStore>)
  - [func \(s \*SyncMap\[K, V\]\) Range\(f func\(key K, value V\) bool\)](<#SyncMap[K, V].Range>)
  - [func \(s \*SyncMap\[K, V\]\) Store\(key K, value V\)](<#SyncMap[K, V].Store>)
  - [func \(s \*SyncMap\[K, V\]\) Swap\(key K, value V\) \(previous V, loaded bool\)](<#SyncMap[K, V].Swap>)
  - [func \(s \*SyncMap\[K, V\]\) ToMap\(\) map\[K\]V](<#SyncMap[K, V].ToMap>)
- [type SyncPool](<#SyncPool>)
  - [func NewSyncPool\[T any\]\(new func\(\) T\) \*SyncPool\[T\]](<#NewSyncPool>)
  - [func \(s \*SyncPool\[T\]\) Get\(\) T](<#SyncPool[T].Get>)
  - [func \(s \*SyncPool\[T\]\) Put\(x T\)](<#SyncPool[T].Put>)


<a name="LockedValue"></a>
## type [LockedValue](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L13-L17>)

LockedValue is a wrapper wrapping a value protect by a mutex

```go
type LockedValue[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewLockedValue"></a>
### func [NewLockedValue](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L20>)

```go
func NewLockedValue[T any](value T) *LockedValue[T]
```

NewLockedValue returns a new LockedValue

<a name="LockedValue[T].Lock"></a>
### func \(\*LockedValue\[T\]\) [Lock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L32>)

```go
func (l *LockedValue[T]) Lock() T
```

Lock and get the value

<a name="LockedValue[T].LockCB"></a>
### func \(\*LockedValue\[T\]\) [LockCB](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L25>)

```go
func (l *LockedValue[T]) LockCB(cb func(T))
```

LockCB is a shortcut for l.mu.Lock\(\) and defer l.mu.Unlock\(\)

<a name="LockedValue[T].SetValue"></a>
### func \(\*LockedValue\[T\]\) [SetValue](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L52>)

```go
func (l *LockedValue[T]) SetValue(value T)
```

SetValue can modify the underlying value with protection

<a name="LockedValue[T].TryLock"></a>
### func \(\*LockedValue\[T\]\) [TryLock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L43>)

```go
func (l *LockedValue[T]) TryLock() (val T, locked bool)
```

TryLock return true with value if lock successfully, return false with zero value if lock failed

<a name="LockedValue[T].Unlock"></a>
### func \(\*LockedValue\[T\]\) [Unlock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L38>)

```go
func (l *LockedValue[T]) Unlock()
```

Unlock then the value is unprotected

<a name="RWLockedValue"></a>
## type [RWLockedValue](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L59-L63>)

RWLockedValue is a wrapper wrapping a value protect by a RWMutex

```go
type RWLockedValue[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewRWLockedValue"></a>
### func [NewRWLockedValue](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L66>)

```go
func NewRWLockedValue[T any](value T) *RWLockedValue[T]
```

NewRWLockedValue returns a new RWLockedValue

<a name="RWLockedValue[T].Lock"></a>
### func \(\*RWLockedValue\[T\]\) [Lock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L71>)

```go
func (l *RWLockedValue[T]) Lock() T
```

Lock and get the value

<a name="RWLockedValue[T].LockCB"></a>
### func \(\*RWLockedValue\[T\]\) [LockCB](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L82>)

```go
func (l *RWLockedValue[T]) LockCB(cb func(T))
```

LockCB is a shortcut for l.mu.RLock\(\) and defer l.mu.RUnlock\(\)

<a name="RWLockedValue[T].RLock"></a>
### func \(\*RWLockedValue\[T\]\) [RLock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L107>)

```go
func (l *RWLockedValue[T]) RLock() T
```

RLock and get the value Gentleman's agreement: RLock means you should not modify the value, We cannot force a declaration that the return value cannot be modified

<a name="RWLockedValue[T].RLockCB"></a>
### func \(\*RWLockedValue\[T\]\) [RLockCB](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L89>)

```go
func (l *RWLockedValue[T]) RLockCB(cb func(T))
```

RLockCB is a shortcut for l.mu.RLock\(\) and defer l.mu.RUnlock\(\)

<a name="RWLockedValue[T].RUnlock"></a>
### func \(\*RWLockedValue\[T\]\) [RUnlock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L113>)

```go
func (l *RWLockedValue[T]) RUnlock()
```

RUnlock then the value is unprotected

<a name="RWLockedValue[T].SetValue"></a>
### func \(\*RWLockedValue\[T\]\) [SetValue](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L127>)

```go
func (l *RWLockedValue[T]) SetValue(value T)
```

SetValue can modify the underlying value with protection

<a name="RWLockedValue[T].TryLock"></a>
### func \(\*RWLockedValue\[T\]\) [TryLock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L96>)

```go
func (l *RWLockedValue[T]) TryLock() (val T, locked bool)
```

TryLock return true with value if lock successfully, return false with zero value if lock failed

<a name="RWLockedValue[T].TryRLock"></a>
### func \(\*RWLockedValue\[T\]\) [TryRLock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L118>)

```go
func (l *RWLockedValue[T]) TryRLock() (val T, locked bool)
```

TryRLock return true with value if lock successfully, return false with zero value if lock failed

<a name="RWLockedValue[T].Unlock"></a>
### func \(\*RWLockedValue\[T\]\) [Unlock](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/locked_value.go#L77>)

```go
func (l *RWLockedValue[T]) Unlock()
```

Unlock then the value is unprotected

<a name="SyncMap"></a>
## type [SyncMap](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L9-L11>)

SyncMap is a wrapper for sync.Map.

```go
type SyncMap[K comparable, V any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewSyncMap"></a>
### func [NewSyncMap](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L14>)

```go
func NewSyncMap[K comparable, V any]() *SyncMap[K, V]
```

NewSyncMap creates a new SyncMap.

<a name="SyncMap[K, V].Clear"></a>
### func \(\*SyncMap\[K, V\]\) [Clear](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map_1_23.go#L8>)

```go
func (s *SyncMap[K, V]) Clear()
```

Clear deletes all the entries, resulting in an empty Map. only available in go1.23

<a name="SyncMap[K, V].CompareAndDelete"></a>
### func \(\*SyncMap\[K, V\]\) [CompareAndDelete](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map_1_20.go#L18>)

```go
func (s *SyncMap[K, V]) CompareAndDelete(key K, old V) bool
```



<a name="SyncMap[K, V].CompareAndSwap"></a>
### func \(\*SyncMap\[K, V\]\) [CompareAndSwap](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map_1_20.go#L14>)

```go
func (s *SyncMap[K, V]) CompareAndSwap(key K, old, new V) bool
```



<a name="SyncMap[K, V].Delete"></a>
### func \(\*SyncMap\[K, V\]\) [Delete](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L48>)

```go
func (s *SyncMap[K, V]) Delete(key K)
```

Delete wraps sync.Map.Delete.

<a name="SyncMap[K, V].Len"></a>
### func \(\*SyncMap\[K, V\]\) [Len](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L62>)

```go
func (s *SyncMap[K, V]) Len() int
```

Len returns the number of elements in the map. The complexity is O\(n\). Not provided in stdlib but by our own

<a name="SyncMap[K, V].Load"></a>
### func \(\*SyncMap\[K, V\]\) [Load](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L19>)

```go
func (s *SyncMap[K, V]) Load(key K) (value V, ok bool)
```

Load wraps sync.Map.Load.

<a name="SyncMap[K, V].LoadAndDelete"></a>
### func \(\*SyncMap\[K, V\]\) [LoadAndDelete](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L39>)

```go
func (s *SyncMap[K, V]) LoadAndDelete(key K) (value V, loaded bool)
```

LoadAndDelete wraps sync.Map.LoadAndDelete.

<a name="SyncMap[K, V].LoadOrStore"></a>
### func \(\*SyncMap\[K, V\]\) [LoadOrStore](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L33>)

```go
func (s *SyncMap[K, V]) LoadOrStore(key K, value V) (actual V, loaded bool)
```

LoadOrStore wraps sync.Map.LoadOrStore.

<a name="SyncMap[K, V].Range"></a>
### func \(\*SyncMap\[K, V\]\) [Range](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L53>)

```go
func (s *SyncMap[K, V]) Range(f func(key K, value V) bool)
```

Range wraps sync.Map.Range.

<a name="SyncMap[K, V].Store"></a>
### func \(\*SyncMap\[K, V\]\) [Store](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L28>)

```go
func (s *SyncMap[K, V]) Store(key K, value V)
```

Store wraps sync.Map.Store.

<a name="SyncMap[K, V].Swap"></a>
### func \(\*SyncMap\[K, V\]\) [Swap](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map_1_20.go#L6>)

```go
func (s *SyncMap[K, V]) Swap(key K, value V) (previous V, loaded bool)
```



<a name="SyncMap[K, V].ToMap"></a>
### func \(\*SyncMap\[K, V\]\) [ToMap](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_map.go#L72>)

```go
func (s *SyncMap[K, V]) ToMap() map[K]V
```

ToMap returns a copy of the map as a regular map.

<a name="SyncPool"></a>
## type [SyncPool](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_pool.go#L5-L9>)



```go
type SyncPool[T any] struct {
    New func() T
    // contains filtered or unexported fields
}
```

<a name="NewSyncPool"></a>
### func [NewSyncPool](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_pool.go#L12>)

```go
func NewSyncPool[T any](new func() T) *SyncPool[T]
```

NewSyncPool creates a new SyncPool with specified init function

<a name="SyncPool[T].Get"></a>
### func \(\*SyncPool\[T\]\) [Get](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_pool.go#L30>)

```go
func (s *SyncPool[T]) Get() T
```

Get wraps sync.Pool.Get.

<a name="SyncPool[T].Put"></a>
### func \(\*SyncPool\[T\]\) [Put](<https://github.com/dashjay/xiter/blob/main/pkg/xsync/sync_pool.go#L36>)

```go
func (s *SyncPool[T]) Put(x T)
```

Put wraps sync.Pool.Put.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
